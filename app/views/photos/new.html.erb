<section class="section">
  <div class="container">
    <h1 class="title">Subir nueva foto</h1>

    <div class="box">
      <%= form_with model: @photo, local: true do |form| %>
        <% if @photo.errors.any? %>
          <div class="notification is-danger">
            <p><strong><%= pluralize(@photo.errors.count, "error") %> impide(n) subir la foto:</strong></p>
            <ul>
              <% @photo.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <div class="field">
          <label class="label">Leyenda</label>
          <div class="control">
            <%= form.text_area :caption, class: "textarea" %>
          </div>
        </div>

        <div class="field">
          <label class="label">Imagen</label>
          <div class="file has-name is-boxed">
            <label class="file-label">
              <%= form.file_field :image, class: "file-input", id: "image-upload" %>
              <span class="file-cta">
                <span class="file-icon">
                  <i class="fas fa-upload"></i>
                </span>
                <span class="file-label">Seleccionar imagen...</span>
              </span>
              <span class="file-name" id="file-name">No se ha seleccionado ninguna imagen</span> <!-- Muestra el nombre del archivo -->
            </label>
          </div>
        </div>

        <div class="field is-grouped">
          <div class="control">
            <%= form.submit 'Subir Foto', class: "button is-link" %>
          </div>
          <div class="control">
            <%= link_to 'Cancelar', photos_path, class: "button is-light" %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</section>

<script>
  // Mostrar el nombre del archivo seleccionado
  document.getElementById('image-upload').addEventListener('change', function() {
    var fileName = this.files[0].name;
    document.getElementById('file-name').textContent = fileName;
  });
</script>
